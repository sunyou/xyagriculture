;(function($){$.fn.extend({iGetFieldPos:function(){var field=this.get(0);if(document.selection){$(this).focus();var sel=document.selection;var range=sel.createRange();var dupRange=range.duplicate();dupRange.moveToElementText(field);dupRange.setEndPoint('EndToEnd',range);field.selectionStart=dupRange.text.length-range.text.length;field.selectionEnd=field.selectionStart+range.text.length;}
return field.selectionStart;},iSelectField:function(start,end){var field=this.get(0);if(arguments[1]==undefined){end=start;}
if(document.selection){var range=field.createTextRange();range.moveEnd('character',-$(this).val().length);range.moveEnd('character',end);range.moveStart('character',start);range.select();}else{field.setSelectionRange(start,end);$(this).focus();}},iSelectStr:function(str){var field=this.get(0);var i=$(this).val().indexOf(str);i!=-1?$(this).iSelectField(i,i+str.length):false;},iAddField:function(str){var field=this.get(0);var v=$(this).val();var len=$(this).val().length;if(document.selection){$(this).focus()
document.selection.createRange().text=str;}else{var selPos=field.selectionStart;$(this).val($(this).val().slice(0,field.selectionStart)+str+$(this).val().slice(field.selectionStart,len));this.iSelectField(selPos+str.length);};},iDelField:function(n){var field=this.get(0);var pos=$(this).iGetFieldPos();var v=$(this).val();if(pos>0){$(this).val(n>0?v.slice(0,pos-n)+v.slice(pos):v.slice(0,pos)+v.slice(pos-n));$(this).iSelectField(pos-(n<0?0:n));}}});})(jQuery);


